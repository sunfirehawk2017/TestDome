<?php

function simulate(array $entries) : array
{
    $result = array();
    $lookBehind = 3;
    $lookAhead = 4;
  
    for ($x = 0; $x < count($entries); $x++) {
      $currentValue = $entries[$x];
      $newValue = $currentValue;
      
      if ($x - $lookBehind >= 0) {
        $lookBehindValue = $entries[$x - $lookBehind];
        if ($currentValue <= $lookBehindValue) {
          $newValue = 0;
        }
      }
      
      if ($x + $lookAhead < count($entries)) {
        $lookAheadValue = $entries[$x + $lookAhead];
        if ($currentValue <= $lookAheadValue) {
          $newValue = 0;
        }
      }      
      
      $result[$x] = $newValue;
    }
  
    return $result;
}

$records = [19, 2, 0, 87, 1, 40, 80, 77, 77, 77, 77];
echo implode(', ', simulate($records));
// Expected output
// 19, 0, 0, 87, 0, 0, 0, 77, 77, 0, 0
